{{- if .Values.secrets.create }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "rockbot.fullname" . }}-secrets
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "rockbot.labels" . | nindent 4 }}
type: Opaque
stringData:
  # ── LLM (any OpenAI-compatible endpoint: OpenRouter, Azure OpenAI, Ollama, etc.) ──
  LLM__Endpoint: {{ required "secrets.llm.endpoint is required" .Values.secrets.llm.endpoint | quote }}
  LLM__ApiKey: {{ required "secrets.llm.apiKey is required" .Values.secrets.llm.apiKey | quote }}
  LLM__ModelId: {{ required "secrets.llm.modelId is required" .Values.secrets.llm.modelId | quote }}
  # ── Web search ────────────────────────────────────────────────────────────────
  WebTools__ApiKey: {{ required "secrets.webTools.apiKey is required" .Values.secrets.webTools.apiKey | quote }}
  # ── RabbitMQ ──────────────────────────────────────────────────────────────────
  RabbitMq__Password: {{ required "secrets.rabbitmq.password is required" .Values.secrets.rabbitmq.password | quote }}
  {{- if .Values.openrouterMcp.enabled }}
  # ── OpenRouter MCP (management API — separate from the LLM key) ───────────────
  OpenRouter__ApiKey: {{ required "secrets.openRouter.apiKey is required when openrouterMcp.enabled=true" .Values.secrets.openRouter.apiKey | quote }}
  {{- end }}
{{- end }}
